# Как оно работает
## Endpoint для загрузки курсов валют по дате
### Точка входа: /loadRates
Метод HTTP: GET  
Описание: Этот endpoint загружает курсы валют за указанную дату и сохраняет их в базу данных.  
**Параметры запроса:**  
- date (required) – Дата в формате ISO (например, "2024-07-20").  
Параметр передается через URL в виде запроса.

Пример: /loadRates?date=2024-07-20  

**Формат ответа:**
* Успех (200 OK): Возвращается текстовое сообщение "Курсы валют загружены".  
* Ошибка (500 Internal Server Error): Возвращается текстовое сообщение "Ошибка при загрузке курсов".

## Endpoint для получения курса валют по дате и коду валюты
### Точка входа: /getRate
Метод HTTP: GET  
Описание: Этот endpoint возвращает курс валюты за указанную дату.
Параметры запроса:
- date (required) – Дата в формате ISO (например, "2024-07-16"). Параметр передается через URL в виде запроса.
- currencyCode (required) – Код валюты (например, "USD", "EUR"). Параметр передается через URL в виде запроса.  

Пример: /getRate?date=2024-07-16&currencyCode=USD  

**Формат ответа:**

* Успех (200 OK): Возвращается объект CurrencyRate в формате JSON, содержащий информацию о курсе валюты.
```
{
    "id": 8,
    "Cur_ID": 431,
    "Date": "2024-07-16",
    "Cur_Abbreviation": "USD",
    "Cur_Scale": 1,
    "Cur_Name": "Доллар США",
    "Cur_OfficialRate": 3.1959
}
```
* Ошибка (404 Not Found): Возвращается текстовое сообщение "Курс валюты не найден на указанную дату".  

Методы сервиса CurrencyRateService взаимодействуют с внешним API НБРБ для получения актуальных данных о курсах валют. Эти данные сохраняются в базу данных, а затем могут быть запрошены через описанные выше endpoints.
Для получения данных .json используется WebClient

Для проверки работы сервиса использовался **Postman**. Коллекция с запросами находится в корне проекта `Bank API Postman.json`.